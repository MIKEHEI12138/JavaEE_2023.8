<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>

    <!--是排版-->
    <link href="./static/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
    <!--是颜色-->
    <link href="./static/css/style.css" rel="stylesheet" type="text/css" />
    <!--又是排版-->
    <link href="./static/css/style-responsive.css" rel="stylesheet" type="text/css" />
    <!--给图片的-->
    <link rel="stylesheet" href="./static/css/1.css">
</head>

<body class="page-header-fixed">

    <div class="header navbar navbar-inverse navbar-fixed-top">
        <div class="header-inner">
            <!--返回首页-->
            <a class="navbar-brand" href="index.html">
                首页
                <!--可以换成图片logo-->
            </a>
            <!--右侧内容-->
            <ul class="nav navbar-nav pull-right">
                <li class="dropdown user">
                    <!--头像和名称-->
                    <a href="#" class="dropdown-toggle" data-toggle="dropdown" data-hover="dropdown"
                        data-close-others="true">
                        <img alt="" src="./static/img/avatar1_small.jpg" />
                        <span class="username">尊敬的管理</span>
                    </a>
                    <!--下滑菜单-->
                    <ul class="dropdown-menu">
                        <li><a href="extra_profile.html"><i class="fa fa-user"></i>修改个人信息</a></li>
                        <li><a href="login.html"><i class="fa fa-key"></i> 退出</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>

    <div class="page-content">
        <div class="row">
            <br><br><br><br>
            <form role="form" action="" method="post">
                <div class="form-group">
                    <label for="text">
                        修改之后的所属食堂：
                    </label>
                    <input type="text" name="productID" class="form-control">
                </div>
                <div class="form-group">
                    <label for="pwd">
                        修改后的档口名称：
                    </label>
                    <input type="text" name="name" class="form-control">
                </div>
                <div class="form-group">
                    <label for="aaa">
                        修改后的图片预览：</p>
                    </label>
                    <img id="image-preview">
                    <p>
                        <input type="file" id="file" name="upload_image"
                            accept="image/gif, image/jpeg, image/png, image/jpg">
                    </p>
                    <p id="info"></p>
                </div>

                &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                <button type="submit" class="btn btn-info" align="center">
                    添加
                </button>
                <button type="reset" class="btn btn-info" align="center">
                    重置：
                </button>
            </form>
            <a href="admin_foodstall.html">返回上一页</a>
        </div>
    </div>
</body>

<script type="text/javascript">
    let fileInput = document.getElementById('file');
    let info = document.getElementById('info');
    let preview = document.getElementById('image-preview');
    // 监听change事件:
    fileInput.addEventListener('change', function () {
        // 清除背景图片:
        preview.style.backgroundImage = '';
        if (!fileInput.value) {
            info.innerHTML = '没有选择文件';
            return;
        }
        let file = fileInput.files[0];
        let size = file.size;
        if (size >= 1 * 1024 * 1024) {
            alert('文件大小超出限制');
            info.innerHTML = '文件大小超出限制';
            return false;
        }
        // 获取File信息:
        info.innerHTML = `文件名称:  + ${file.name}<br>文件大小: ${file.size} <br>上传时间: ${file.lastModifiedDate}`;
        if (!['image/jpeg', 'image/png', 'image/gif'].includes(file.type)) {
            alert('不是有效的图片文件!');
            return;
        }
        // 读取文件:
        let reader = new FileReader();
        reader.onload = function (e) {
            let data = e.target.result;
            console.log(preview, 'a标签')
            preview.src = data
        };
        // 以DataURL的形式读取文件:
        reader.readAsDataURL(file);

    });
</script>

</html>